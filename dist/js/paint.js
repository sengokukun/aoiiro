$(document).ready(function(){"use strict";var o=!1,t=[],e=$(".paint-canvas"),n=e[0].getContext("2d"),a={up:"mouseup",down:"mousedown",leave:"mouseleave",move:"mousemove"},i={turquoise:"#0086a2",aiiro:"#105889",darkturquoise:"#00A5BF",blue:"#00a5bf"},r=i[Object.keys(i)[0]];"ontouchstart"in window&&(a={up:"touchend",down:"touchstart",leave:"touchleave",move:"touchmove"});var c=function(t){var e=t.pageX-this.offsetLeft,n=t.pageY-this.offsetTop;o=!0,v(e,n),f()},u=function(t){if(o){var e=t.pageX-this.offsetLeft,n=t.pageY-this.offsetTop;v(e,n,!0),f()}},s=function(t){o=!1},v=function(o,e,n){var a={x:o,y:e,drag:!!n,color:r};t.push(a)},f=function(){l();var o=t.length;n.lineJoin="round",n.lineWidth=5;for(var e=0;e<o;e++){var a=t[e],i=t[e-1];n.strokeStyle=a.color,n.beginPath(),a.drag?n.moveTo(i.x,i.y):n.moveTo(a.x-1,a.y),n.lineTo(a.x,a.y),n.closePath(),n.stroke()}},l=function(o){n.clearRect(0,0,n.canvas.width,n.canvas.height),o&&(t=[])};e.on(a.down,c).on(a.move,u).on(a.up,s).on(a.leave,s),$("button.button--clear").on("click",function(){l(!0)}),$("#color-box").on("click","li",function(){r=i[$(this).attr("class")]}),$(".button--getimage").on("click",function(){var o;o=$("#preview").length?$("#preview"):$(new Image).insertAfter(".paint"),o.hide().addClass("paint-wrap").attr("id","preview").attr("src",e[0].toDataURL()).on("load",function(){o.fadeIn()})})});