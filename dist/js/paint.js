$(document).ready(function(){"use strict";var o=!1,e=[],t=$(".paint-canvas"),n=t[0].getContext("2d"),a={up:"mouseup",down:"mousedown",leave:"mouseleave",move:"mousemove"},i={turquoise:"#0086a2",aiiro:"#105889",darkturquoise:"#00A5BF",blue:"#00a5bf"},c=i[Object.keys(i)[0]];"ontouchstart"in window&&(a={up:"touchend",down:"touchstart",leave:"touchleave",move:"touchmove"});var r=function(e){var t=e.pageX-this.offsetLeft,n=e.pageY-this.offsetTop;o=!0,v(t,n),f()},u=function(e){if(o){var t=e.pageX-this.offsetLeft,n=e.pageY-this.offsetTop;v(t,n,!0),f()}},s=function(e){o=!1},v=function(o,t,n){var a={x:o,y:t,drag:!!n,color:c};e.push(a)},f=function(){l();var o=e.length;n.lineJoin="round",n.lineWidth=5;for(var t=0;t<o;t++){var a=e[t],i=e[t-1];n.strokeStyle=a.color,n.beginPath(),a.drag?n.moveTo(i.x,i.y):n.moveTo(a.x-1,a.y),n.lineTo(a.x,a.y),n.closePath(),n.stroke()}},l=function(o){n.clearRect(0,0,n.canvas.width,n.canvas.height),o&&(e=[])};t.on(a.down,r).on(a.move,u).on(a.up,s).on(a.leave,s),$(".button--clear").on("click",function(){l(!0)}),$("#color-box").on("click","li",function(){c=i[$(this).attr("class")]}),$(".button--getimage").on("click",function(){var o;o=$("#preview").length?$("#preview"):$(new Image).insertAfter(".bg .paint"),o.hide().addClass("paint").attr("id","preview").attr("src",t[0].toDataURL()).on("load",function(){o.fadeIn()})})});