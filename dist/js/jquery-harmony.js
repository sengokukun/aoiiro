!function(t){var o,e=function(){var t=document.createElement("canvas");return!(!t.getContext||!t.getContext("2d"))},n=function(){var t=function(t){return"#"===t.charAt(0)?t.substring(1,7):t};return{toR:function(o){return parseInt(t(o).substring(0,2),16)},toG:function(o){return parseInt(t(o).substring(2,4),16)},toB:function(o){return parseInt(t(o).substring(4,6),16)},isHex:function(t){return"#"===t.charAt(0)}}}();!function(e,n,i){var s,r={},h=e.innerWidth,u=e.innerHeight;s=function(t,o){return t in r?new r[t](o):new r.ribbon(o)},function(){function t(t){var o,e=[];for(o=1;o<arguments.length;o++)e.push(arguments[o]);return function(){return t.apply(this,e)}}r.ribbon=function(t){this.init(t)},r.ribbon.prototype={context:null,mouseX:null,mouseY:null,painters:null,interval:null,init:function(o){this.context=o,this.context.lineWidth=1,this.context.globalCompositeOperation="source-over",this.mouseX=h/2,this.mouseY=u/2,this.painters=new Array;for(var e=0;e<50;e++)this.painters.push({dx:h/2,dy:u/2,ax:0,ay:0,div:.1,ease:.2*Math.random()+.6});this.isDrawing=!1,this.interval=setInterval(t(function(t){return t.update(),!1},this),1e3/60)},destroy:function(){clearInterval(this.interval)},strokeStart:function(t,o,e){this.mouseX=t,this.mouseY=o,this.context.strokeStyle="rgba("+e[0]+", "+e[1]+", "+e[2]+", 0.05 )";for(var n=0;n<this.painters.length;n++)this.painters[n].dx=t,this.painters[n].dy=o;this.shouldDraw=!0},stroke:function(t,o){this.mouseX=t,this.mouseY=o},strokeEnd:function(){},update:function(){var t;for(t=0;t<this.painters.length;t++)this.context.beginPath(),this.context.moveTo(this.painters[t].dx,this.painters[t].dy),this.painters[t].dx-=this.painters[t].ax=(this.painters[t].ax+(this.painters[t].dx-this.mouseX)*this.painters[t].div)*this.painters[t].ease,this.painters[t].dy-=this.painters[t].ay=(this.painters[t].ay+(this.painters[t].dy-this.mouseY)*this.painters[t].div)*this.painters[t].ease,this.context.lineTo(this.painters[t].dx,this.painters[t].dy),this.context.stroke()}}}(),function(){r.squares=function(t){this.init(t)},r.squares.prototype={context:null,prevMouseX:null,prevMouseY:null,init:function(t){this.context=t,this.context.globalCompositeOperation="source-over",this.context.fillStyle="#0086a2",this.context.lineWidth=.1},destroy:function(){},strokeStart:function(t,o,e){this.prevMouseX=t,this.prevMouseY=o,this.context.strokeStyle="rgb("+e[0]+", "+e[1]+", "+e[2]+")"},stroke:function(t,o){var e,n,i,s,r;e=t-this.prevMouseX,n=o-this.prevMouseY,i=1.57079633,s=Math.cos(i)*e-Math.sin(i)*n,r=Math.sin(i)*e+Math.cos(i)*n,this.context.beginPath(),this.context.moveTo(this.prevMouseX-s,this.prevMouseY-r),this.context.lineTo(this.prevMouseX+s,this.prevMouseY+r),this.context.lineTo(t+s,o+r),this.context.lineTo(t-s,o-r),this.context.lineTo(this.prevMouseX-s,this.prevMouseY-r),this.context.fill(),this.context.stroke(),this.prevMouseX=t,this.prevMouseY=o},strokeEnd:function(){}}}(),function(){r.chrome=function(t){this.init(t)},r.chrome.prototype={context:null,prevMouseX:null,prevMouseY:null,points:null,count:null,init:function(t){this.context=t,this.context.lineWidth=1,RegExp(" AppleWebKit/").test(navigator.userAgent)&&(this.context.globalCompositeOperation="darker"),this.points=new Array,this.count=0},destroy:function(){},strokeStart:function(t,o){this.prevMouseX=t,this.prevMouseY=o},stroke:function(t,o,e){var n,i,s,r;for(this.points.push([t,o]),this.context.strokeStyle="rgba("+e[0]+", "+e[1]+", "+e[2]+", 0.1)",this.context.beginPath(),this.context.moveTo(this.prevMouseX,this.prevMouseY),this.context.lineTo(t,o),this.context.stroke(),n=0;n<this.points.length;n++)i=this.points[n][0]-this.points[this.count][0],s=this.points[n][1]-this.points[this.count][1],r=i*i+s*s,r<1e3&&(this.context.strokeStyle="rgba("+Math.floor(Math.random()*e[0])+", "+Math.floor(Math.random()*e[1])+", "+Math.floor(Math.random()*e[2])+", 0.1 )",this.context.beginPath(),this.context.moveTo(this.points[this.count][0]+.2*i,this.points[this.count][1]+.2*s),this.context.lineTo(this.points[n][0]-.2*i,this.points[n][1]-.2*s),this.context.stroke());this.prevMouseX=t,this.prevMouseY=o,this.count++},strokeEnd:function(){}}}(),function(){r.circles=function(t){this.init(t)},r.circles.prototype={context:null,prevMouseX:null,prevMouseY:null,points:null,count:null,init:function(t){this.context=t,this.context.lineWidth=1,this.context.globalCompositeOperation="source-over",this.points=new Array},destroy:function(){},strokeStart:function(t,o,e){this.prevMouseX=t,this.prevMouseY=o,this.context.strokeStyle="rgba("+e[0]+", "+e[1]+", "+e[2]+", 0.1)"},stroke:function(t,o){var e,n,i,s,r,h,u,c;for(this.points.push([t,o]),n=t-this.prevMouseX,i=o-this.prevMouseY,s=2*Math.sqrt(n*n+i*i),r=100*Math.floor(t/100)+50,h=100*Math.floor(o/100)+50,u=Math.floor(10*Math.random()),c=s/u,e=0;e<u;e++)this.context.beginPath(),this.context.arc(r,h,(u-e)*c,0,2*Math.PI,!0),this.context.stroke();this.prevMouseX=t,this.prevMouseY=o},strokeEnd:function(){}}}(),function(){r.fur=function(t){this.init(t)},r.fur.prototype={context:null,prevMouseX:null,prevMouseY:null,points:null,count:null,init:function(t){this.context=t,this.context.lineWidth=1,this.points=new Array,this.count=0},destroy:function(){},strokeStart:function(t,o,e){this.prevMouseX=t,this.prevMouseY=o,this.context.strokeStyle="rgba("+e[0]+", "+e[1]+", "+e[2]+", 0.1)"},stroke:function(t,o){var e,n,i,s;for(this.points.push([t,o]),this.context.beginPath(),this.context.moveTo(this.prevMouseX,this.prevMouseY),this.context.lineTo(t,o),this.context.stroke(),e=0;e<this.points.length;e++)n=this.points[e][0]-this.points[this.count][0],i=this.points[e][1]-this.points[this.count][1],s=n*n+i*i,s<2e3&&Math.random()>s/2e3&&(this.context.beginPath(),this.context.moveTo(t+.5*n,o+.5*i),this.context.lineTo(t-.5*n,o-.5*i),this.context.stroke());this.prevMouseX=t,this.prevMouseY=o,this.count++},strokeEnd:function(){}}}(),function(){r.grid=function(t){this.init(t)},r.grid.prototype={context:null,init:function(t){this.context=t,this.context.lineWidth=1,RegExp(" AppleWebKit/").test(navigator.userAgent)&&(this.context.globalCompositeOperation="darker")},destroy:function(){},strokeStart:function(t,o,e){this.context.strokeStyle="rgba("+e[0]+", "+e[1]+", "+e[2]+", 0.01)"},stroke:function(t,o){var e,n,i,s,r;for(n=100*Math.round(t/100),i=100*Math.round(o/100),s=10*(n-t),r=10*(i-o),e=0;e<50;e++)this.context.beginPath(),this.context.moveTo(n,i),this.context.quadraticCurveTo(t+Math.random()*s,o+Math.random()*r,n,i),this.context.stroke()},strokeEnd:function(){}}}(),function(){r.longfur=function(t){this.init(t)},r.longfur.prototype={context:null,points:null,count:null,init:function(t){this.context=t,this.context.lineWidth=1,this.context.globalCompositeOperation="source-over",this.points=new Array,this.count=0},destroy:function(){},strokeStart:function(t,o,e){this.context.strokeStyle="rgba("+e[0]+", "+e[1]+", "+e[2]+", 0.05 )"},stroke:function(t,o){var e,n,i,s,r;for(this.points.push([t,o]),e=0;e<this.points.length;e++)n=-Math.random(),i=this.points[e][0]-this.points[this.count][0],s=this.points[e][1]-this.points[this.count][1],r=i*i+s*s,r<4e3&&Math.random()>r/4e3&&(this.context.beginPath(),this.context.moveTo(this.points[this.count][0]+i*n,this.points[this.count][1]+s*n),this.context.lineTo(this.points[e][0]-i*n+2*Math.random(),this.points[e][1]-s*n+2*Math.random()),this.context.stroke());this.count++},strokeEnd:function(){}}}(),function(){r.shaded=function(t){this.init(t)},r.shaded.prototype={context:null,prevMouseX:null,prevMouseY:null,points:null,count:null,init:function(t){this.context=t,this.context.lineWidth=1,this.context.globalCompositeOperation="source-over",this.points=new Array,this.count=0},destroy:function(){},strokeStart:function(t,o){this.prevMouseX=t,this.prevMouseY=o},stroke:function(t,o,e){var n,i,s,r;for(this.points.push([t,o]),n=0;n<this.points.length;n++)i=this.points[n][0]-this.points[this.count][0],s=this.points[n][1]-this.points[this.count][1],r=i*i+s*s,r<1e3&&(this.context.strokeStyle="rgba("+e[0]+", "+e[1]+", "+e[2]+", "+.1*(1-r/1e3)+" )",this.context.beginPath(),this.context.moveTo(this.points[this.count][0],this.points[this.count][1]),this.context.lineTo(this.points[n][0],this.points[n][1]),this.context.stroke());this.prevMouseX=t,this.prevMouseY=o,this.count++},strokeEnd:function(){}}}(),function(){r.simple=function(t){this.init(t)},r.simple.prototype={context:null,prevMouseX:null,prevMouseY:null,init:function(t){this.context=t,this.context.globalCompositeOperation="source-over",this.context.lineWidth=.5},destroy:function(){},strokeStart:function(t,o,e){this.prevMouseX=t,this.prevMouseY=o,this.context.strokeStyle="rgba("+e[0]+", "+e[1]+", "+e[2]+", 0.5)"},stroke:function(t,o){this.context.beginPath(),this.context.moveTo(this.prevMouseX,this.prevMouseY),this.context.lineTo(t,o),this.context.stroke(),this.prevMouseX=t,this.prevMouseY=o},strokeEnd:function(){}}}(),function(){r.sketchy=function(t){this.init(t)},r.sketchy.prototype={context:null,prevMouseX:null,prevMouseY:null,points:null,count:null,init:function(t){this.context=t,this.context.lineWidth=1,this.context.globalCompositeOperation="source-over",this.points=new Array,this.count=0},destroy:function(){},strokeStart:function(t,o){this.prevMouseX=t,this.prevMouseY=o},stroke:function(t,o,e){var n,i,s,r;for(this.points.push([t,o]),this.context.strokeStyle="rgba("+e[0]+", "+e[1]+", "+e[2]+", 0.05)",this.context.beginPath(),this.context.moveTo(this.prevMouseX,this.prevMouseY),this.context.lineTo(t,o),this.context.stroke(),this.context.strokeStyle="rgba("+e[0]+", "+e[1]+", "+e[2]+", 0.05 )",n=0;n<this.points.length;n++)i=this.points[n][0]-this.points[this.count][0],s=this.points[n][1]-this.points[this.count][1],r=i*i+s*s,r<4e3&&Math.random()>r/2e3&&(this.context.beginPath(),this.context.moveTo(this.points[this.count][0]+.3*i,this.points[this.count][1]+.3*s),this.context.lineTo(this.points[n][0]-.3*i,this.points[n][1]-.3*s),this.context.stroke());this.prevMouseX=t,this.prevMouseY=o,this.count++},strokeEnd:function(){}}}(),function(){r.web=function(t){this.init(t)},r.web.prototype={context:null,prevMouseX:null,prevMouseY:null,points:null,count:null,init:function(t){this.context=t,this.context.lineWidth=1,this.context.globalCompositeOperation="source-over",this.points=new Array,this.count=0},destroy:function(){},strokeStart:function(t,o){this.prevMouseX=t,this.prevMouseY=o},stroke:function(t,o,e){var n,i,s,r;for(this.points.push([t,o]),this.context.strokeStyle="rgba("+e[0]+", "+e[1]+", "+e[2]+", 0.5)",this.context.beginPath(),this.context.moveTo(this.prevMouseX,this.prevMouseY),this.context.lineTo(t,o),this.context.stroke(),this.context.strokeStyle="rgba("+e[0]+", "+e[1]+", "+e[2]+", 0.1)",n=0;n<this.points.length;n++)i=this.points[n][0]-this.points[this.count][0],s=this.points[n][1]-this.points[this.count][1],r=i*i+s*s,r<2500&&Math.random()>.9&&(this.context.beginPath(),this.context.moveTo(this.points[this.count][0],this.points[this.count][1]),this.context.lineTo(this.points[n][0],this.points[n][1]),this.context.stroke());this.prevMouseX=t,this.prevMouseY=o,this.count++},strokeEnd:function(){}}}(),function(){o=function(o){var i,r,c,a,p;o=o||{};var l=function(){h=o.width?o.width:e.innerWidth,u=o.height?o.height:e.innerHeight,savecanvas=n.createElement("canvas"),savecanvas.width=c.width,savecanvas.height=c.height,savecanvas.getContext("2d").drawImage(c,0,0),c.width=h,c.height=u,p.drawImage(savecanvas,0,0),i=s(o.brush,p)},v=function(t){i.strokeEnd(),e.removeEventListener("mousemove",f,!1),e.removeEventListener("mouseup",v,!1)},f=function(n){var s,r=f.pts,h=o.offset.top-t(e).scrollTop(),u=n.clientX,c=n.clientY,a=n.target;a.parentNode;return u=o.offset?u-o.offset.left:u,c-=h,i.isStroking?(f.lastMove&&n.timeStamp-f.lastMove>300&&(r&&r.length?(e.DollarRecognizer&&(s=Rcgnzr.Recognize(r),"star"==s.Name&&s.Score>=.6&&e.starryEgg&&starryEgg()),f.pts=[]):f.pts=[]),f.lastMove=+n.timeStamp,e.Point&&r&&(r[r.length]=new Point(u,c)),console.log(o.color),void i.stroke(u,c,o.color)):(i.strokeStart(n.clientX,n.clientY,o.color),i.isStroking=!0,void(e.DollarRecognizer&&(e.Rcgnzr=new DollarRecognizer)))},x=function(t){1==t.touches.length&&(t.preventDefault(),i.strokeStart(t.touches[0].pageX,t.touches[0].pageY,o.color),e.addEventListener("touchmove",d,!1),e.addEventListener("touchend",g,!1))},d=function(t){1==t.touches.length&&(t.preventDefault(),i.stroke(t.touches[0].pageX,t.touches[0].pageY,o.color))},g=function(t){0==t.touches.length&&(t.preventDefault(),i.strokeEnd(),e.removeEventListener("touchmove",d,!1),e.removeEventListener("touchend",g,!1))};if(r=n.createElement("div"),o.appendTo&&o.appendTo instanceof jQuery?o.appendTo.append(r):n.body.appendChild(r),c=n.createElement("canvas"),c.width=o.width?o.width:h,c.height=o.height?o.height:u,c.style.cursor="crosshair",r.appendChild(c),c.getContext)return p=c.getContext("2d"),a=n.createElement("canvas"),a.width=o.width?o.width:h,a.height=o.height?o.height:u,i||(i=s("ribbon",p)),o.preventResize||e.addEventListener("resize",l,!1),n.addEventListener("mouseout",v,!1),c.addEventListener("mousemove",f,!1),c.addEventListener("touchstart",x,!1),l(o),c}}()}(this,this.document),t.fn.harmony=function(i){return i=i||{},e()?this.each(function(){var e,s,r,h,u,c=t(this).css({position:"relative"});h=i.color?i.color:[0,0,0],u=i.brush?i.brush:"ribbon",e={color:c.attr("data-color")?c.attr("data-color").split(","):h,brush:c.attr("data-brush")?c.attr("data-brush"):u},s=t.extend({},t.fn.harmony.defaults,i,e),1===s.color.length&&(r=s.color[0],s.color=[n.toR(r),n.toG(r),n.toB(r)]),o({brush:s.brush,color:s.color,height:c.innerHeight(),width:c.innerWidth(),offset:c.offset(),preventResize:!0,appendTo:c})}):this},t.fn.harmony.defaults={color:[0,0,0],brush:"ribbon"}}(jQuery);